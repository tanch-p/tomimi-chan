import{a4 as te,a5 as le,S as ue,i as ce,s as fe,k as O,q as U,a as P,C as q,l as L,m as k,r as z,h as v,c as x,D as A,n as a,p as se,b as de,E as c,G as N,u as F,F as oe,T as me,L as he}from"./index.de62ce89.js";import{c as pe}from"./DraggableContainer.a612c0ec.js";import{w as be}from"./singletons.c5e91e64.js";import{t as ae}from"./translations.916dba18.js";function ie(e){return Object.prototype.toString.call(e)==="[object Date]"}function K(e,i,t,p){if(typeof t=="number"||ie(t)){const d=p-t,l=(t-i)/(e.dt||1/60),r=e.opts.stiffness*d,o=e.opts.damping*l,f=(r-o)*e.inv_mass,m=(l+f)*e.dt;return Math.abs(m)<e.opts.precision&&Math.abs(d)<e.opts.precision?p:(e.settled=!1,ie(t)?new Date(t.getTime()+m):t+m)}else{if(Array.isArray(t))return t.map((d,l)=>K(e,i[l],t[l],p[l]));if(typeof t=="object"){const d={};for(const l in t)d[l]=K(e,i[l],t[l],p[l]);return d}else throw new Error(`Cannot spring ${typeof t} values`)}}function _e(e,i={}){const t=be(e),{stiffness:p=.15,damping:d=.8,precision:l=.01}=i;let r,o,f,m=e,b=e,u=1,y=0,n=!1;function _(M,w={}){b=M;const S=f={};return e==null||w.hard||g.stiffness>=1&&g.damping>=1?(n=!0,r=te(),m=M,t.set(e=b),Promise.resolve()):(w.soft&&(y=1/((w.soft===!0?.5:+w.soft)*60),u=0),o||(r=te(),n=!1,o=le(T=>{if(n)return n=!1,o=null,!1;u=Math.min(u+y,1);const I={inv_mass:u,opts:g,settled:!0,dt:(T-r)*60/1e3},V=K(I,m,e,b);return r=T,m=e,t.set(e=V),I.settled&&(o=null),!I.settled})),new Promise(T=>{o.promise.then(()=>{S===f&&T()})}))}const g={set:_,update:(M,w)=>_(M(b,e),w),subscribe:t.subscribe,stiffness:p,damping:d,precision:l};return g}function ge(e){let i,t,p=ae[e[0]].difficulty+"",d,l,r,o,f,m,b,u,y,n,_,g=Math.floor(e[3]+1)+"",M,w,S,T=Math.floor(e[3])+"",I,V,h,B,s,C,R,H;return{c(){i=O("div"),t=O("p"),d=U(p),l=P(),r=O("div"),o=O("button"),f=q("svg"),m=q("path"),u=P(),y=O("div"),n=O("div"),_=O("strong"),M=U(g),w=P(),S=O("strong"),I=U(T),V=P(),h=O("button"),B=q("svg"),s=q("path"),this.h()},l(D){i=L(D,"DIV",{class:!0});var E=k(i);t=L(E,"P",{class:!0});var J=k(t);d=z(J,p),J.forEach(v),l=x(E),r=L(E,"DIV",{class:!0});var j=k(r);o=L(j,"BUTTON",{"aria-label":!0,class:!0,id:!0});var Q=k(o);f=A(Q,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var W=k(f);m=A(W,"path",{d:!0,class:!0}),k(m).forEach(v),W.forEach(v),Q.forEach(v),u=x(j),y=L(j,"DIV",{class:!0});var X=k(y);n=L(X,"DIV",{class:!0,style:!0});var G=k(n);_=L(G,"STRONG",{class:!0,"aria-hidden":!0});var Y=k(_);M=z(Y,g),Y.forEach(v),w=x(G),S=L(G,"STRONG",{id:!0,class:!0});var Z=k(S);I=z(Z,T),Z.forEach(v),G.forEach(v),X.forEach(v),V=x(j),h=L(j,"BUTTON",{"aria-label":!0,class:!0,id:!0});var $=k(h);B=A($,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var ee=k(B);s=A(ee,"path",{d:!0,class:!0}),k(s).forEach(v),ee.forEach(v),$.forEach(v),j.forEach(v),E.forEach(v),this.h()},h(){a(t,"class","text-subheading"),a(m,"d","M0,0.5 L1,0.5"),a(m,"class","group-disabled:stroke-[#444] svelte-b27oxu"),a(f,"aria-hidden","true"),a(f,"viewBox","0 0 1 1"),a(f,"class","svelte-b27oxu"),o.disabled=b=e[2]<=0,a(o,"aria-label","Decrease the counter by one"),a(o,"class","group svelte-b27oxu"),a(o,"id","diff-minus"),a(_,"class","hidden svelte-b27oxu"),a(_,"aria-hidden","true"),a(S,"id","diff-count"),a(S,"class","svelte-b27oxu"),a(n,"class","counter-digits svelte-b27oxu"),se(n,"transform","translate(0, "+100*e[5]+"%)"),a(y,"class","counter-viewport select-none svelte-b27oxu"),a(s,"d","M0,0.5 L1,0.5 M0.5,0 L0.5,1"),a(s,"class","group-disabled:stroke-[#444] svelte-b27oxu"),a(B,"aria-hidden","true"),a(B,"viewBox","0 0 1 1"),a(B,"class","svelte-b27oxu"),h.disabled=C=e[2]>=e[1],a(h,"aria-label","Increase the counter by one"),a(h,"class","group svelte-b27oxu"),a(h,"id","diff-plus"),a(r,"class","counter svelte-b27oxu"),a(i,"class","px-2 sm:px-6 select-none mt-2.5")},m(D,E){de(D,i,E),c(i,t),c(t,d),c(i,l),c(i,r),c(r,o),c(o,f),c(f,m),c(r,u),c(r,y),c(y,n),c(n,_),c(_,M),c(n,w),c(n,S),c(S,I),c(r,V),c(r,h),c(h,B),c(B,s),R||(H=[N(o,"mousedown",e[12]),N(o,"mouseup",e[13]),N(o,"mouseleave",e[14]),N(o,"click",e[15]),N(h,"mousedown",e[16]),N(h,"mouseup",e[17]),N(h,"mouseleave",e[18]),N(h,"click",e[19])],R=!0)},p(D,[E]){E&1&&p!==(p=ae[D[0]].difficulty+"")&&F(d,p),E&4&&b!==(b=D[2]<=0)&&(o.disabled=b),E&8&&g!==(g=Math.floor(D[3]+1)+"")&&F(M,g),E&8&&T!==(T=Math.floor(D[3])+"")&&F(I,T),E&32&&se(n,"transform","translate(0, "+100*D[5]+"%)"),E&6&&C!==(C=D[2]>=D[1])&&(h.disabled=C)},i:oe,o:oe,d(D){D&&v(i),R=!1,me(H)}}}let ne=300,re=100;function ve(e,i){return(e%i+i)%i}function ye(e,i,t){let p,d,{language:l,difficulty:r,rogueTopic:o,maxDiff:f=15}=i;const m=s=>{switch(s){case"rogue_mizuki":return"difficulty";default:return`${s.split("_")[1]}_difficulty`}};function b(s){s<0||s>f||r.update(()=>s)}let u;r.subscribe(s=>{t(2,u=s)});const y=_e();he(e,y,s=>t(3,d=s));let n;function _(s){u>0&&t(4,n=setTimeout(function(){b(u-1),_(Math.max(s-100,re))},s))}function g(s){u<f&&t(4,n=setTimeout(function(){b(u+1),g(Math.max(s-100,re))},s))}const M=()=>_(ne),w=()=>clearTimeout(n),S=()=>clearTimeout(n),T=()=>b(u-1),I=()=>g(ne),V=()=>clearTimeout(n),h=()=>clearTimeout(n),B=()=>b(u+1);return e.$$set=s=>{"language"in s&&t(0,l=s.language),"difficulty"in s&&t(10,r=s.difficulty),"rogueTopic"in s&&t(11,o=s.rogueTopic),"maxDiff"in s&&t(1,f=s.maxDiff)},e.$$.update=()=>{e.$$.dirty&2052&&pe&&localStorage.setItem(m(o),u.toString()),e.$$.dirty&4&&y.set(u),e.$$.dirty&8&&t(5,p=ve(d,1))},[l,f,u,d,n,p,b,y,_,g,r,o,M,w,S,T,I,V,h,B]}class we extends ue{constructor(i){super(),ce(this,i,ye,ge,fe,{language:0,difficulty:10,rogueTopic:11,maxDiff:1})}}export{we as D};
