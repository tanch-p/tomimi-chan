import{Y as te,Z as le,S as ue,i as ce,s as de,k as B,q as z,a as q,T as A,l as O,m as T,r as H,h as g,c as C,U as G,n as a,p as se,b as fe,H as d,O as N,u as J,I as oe,Q as me,J as pe}from"./index.fef03e7a.js";import{c as he}from"./StageHeader.91015f8c.js";import{w as be}from"./singletons.1f0531de.js";import{t as ae}from"./translations.484a5201.js";function ie(e){return Object.prototype.toString.call(e)==="[object Date]"}function K(e,i,t,h){if(typeof t=="number"||ie(t)){const f=h-t,r=(t-i)/(e.dt||1/60),n=e.opts.stiffness*f,o=e.opts.damping*r,b=(n-o)*e.inv_mass,l=(r+b)*e.dt;return Math.abs(l)<e.opts.precision&&Math.abs(f)<e.opts.precision?h:(e.settled=!1,ie(t)?new Date(t.getTime()+l):t+l)}else{if(Array.isArray(t))return t.map((f,r)=>K(e,i[r],t[r],h[r]));if(typeof t=="object"){const f={};for(const r in t)f[r]=K(e,i[r],t[r],h[r]);return f}else throw new Error(`Cannot spring ${typeof t} values`)}}function _e(e,i={}){const t=be(e),{stiffness:h=.15,damping:f=.8,precision:r=.01}=i;let n,o,b,l=e,u=e,k=1,m=0,c=!1;function _(M,E={}){u=M;const S=b={};return e==null||E.hard||w.stiffness>=1&&w.damping>=1?(c=!0,n=te(),l=M,t.set(e=u),Promise.resolve()):(E.soft&&(m=1/((E.soft===!0?.5:+E.soft)*60),k=0),o||(n=te(),c=!1,o=le(v=>{if(c)return c=!1,o=null,!1;k=Math.min(k+m,1);const I={inv_mass:k,opts:w,settled:!0,dt:(v-n)*60/1e3},V=K(I,l,e,u);return n=v,l=e,t.set(e=V),I.settled&&(o=null),!I.settled})),new Promise(v=>{o.promise.then(()=>{S===b&&v()})}))}const w={set:_,update:(M,E)=>_(M(u,e),E),subscribe:t.subscribe,stiffness:h,damping:f,precision:r};return w}function ge(e){let i,t,h=ae[e[0]].difficulty+"",f,r,n,o,b,l,u,k,m,c,_,w=Math.floor(e[2]+1)+"",M,E,S,v=Math.floor(e[2])+"",I,V,p,s,j,P,R,Q;return{c(){i=B("div"),t=B("p"),f=z(h),r=q(),n=B("div"),o=B("button"),b=A("svg"),l=A("path"),k=q(),m=B("div"),c=B("div"),_=B("strong"),M=z(w),E=q(),S=B("strong"),I=z(v),V=q(),p=B("button"),s=A("svg"),j=A("path"),this.h()},l(D){i=O(D,"DIV",{class:!0});var y=T(i);t=O(y,"P",{class:!0});var Y=T(t);f=H(Y,h),Y.forEach(g),r=C(y),n=O(y,"DIV",{class:!0});var L=T(n);o=O(L,"BUTTON",{"aria-label":!0,class:!0,id:!0});var Z=T(o);b=G(Z,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var x=T(b);l=G(x,"path",{d:!0,class:!0}),T(l).forEach(g),x.forEach(g),Z.forEach(g),k=C(L),m=O(L,"DIV",{class:!0});var F=T(m);c=O(F,"DIV",{class:!0,style:!0});var U=T(c);_=O(U,"STRONG",{class:!0,"aria-hidden":!0});var W=T(_);M=H(W,w),W.forEach(g),E=C(U),S=O(U,"STRONG",{id:!0,class:!0});var X=T(S);I=H(X,v),X.forEach(g),U.forEach(g),F.forEach(g),V=C(L),p=O(L,"BUTTON",{"aria-label":!0,class:!0,id:!0});var $=T(p);s=G($,"svg",{"aria-hidden":!0,viewBox:!0,class:!0});var ee=T(s);j=G(ee,"path",{d:!0,class:!0}),T(j).forEach(g),ee.forEach(g),$.forEach(g),L.forEach(g),y.forEach(g),this.h()},h(){a(t,"class","text-subheading"),a(l,"d","M0,0.5 L1,0.5"),a(l,"class","group-disabled:stroke-[#444] svelte-b27oxu"),a(b,"aria-hidden","true"),a(b,"viewBox","0 0 1 1"),a(b,"class","svelte-b27oxu"),o.disabled=u=e[1]<=0,a(o,"aria-label","Decrease the counter by one"),a(o,"class","group svelte-b27oxu"),a(o,"id","diff-minus"),a(_,"class","hidden svelte-b27oxu"),a(_,"aria-hidden","true"),a(S,"id","diff-count"),a(S,"class","svelte-b27oxu"),a(c,"class","counter-digits svelte-b27oxu"),se(c,"transform","translate(0, "+100*e[4]+"%)"),a(m,"class","counter-viewport select-none svelte-b27oxu"),a(j,"d","M0,0.5 L1,0.5 M0.5,0 L0.5,1"),a(j,"class","group-disabled:stroke-[#444] svelte-b27oxu"),a(s,"aria-hidden","true"),a(s,"viewBox","0 0 1 1"),a(s,"class","svelte-b27oxu"),p.disabled=P=e[1]>=15,a(p,"aria-label","Increase the counter by one"),a(p,"class","group svelte-b27oxu"),a(p,"id","diff-plus"),a(n,"class","counter svelte-b27oxu"),a(i,"class","px-2 sm:px-6 select-none")},m(D,y){fe(D,i,y),d(i,t),d(t,f),d(i,r),d(i,n),d(n,o),d(o,b),d(b,l),d(n,k),d(n,m),d(m,c),d(c,_),d(_,M),d(c,E),d(c,S),d(S,I),d(n,V),d(n,p),d(p,s),d(s,j),R||(Q=[N(o,"mousedown",e[11]),N(o,"mouseup",e[12]),N(o,"mouseleave",e[13]),N(o,"click",e[14]),N(p,"mousedown",e[15]),N(p,"mouseup",e[16]),N(p,"mouseleave",e[17]),N(p,"click",e[18])],R=!0)},p(D,[y]){y&1&&h!==(h=ae[D[0]].difficulty+"")&&J(f,h),y&2&&u!==(u=D[1]<=0)&&(o.disabled=u),y&4&&w!==(w=Math.floor(D[2]+1)+"")&&J(M,w),y&4&&v!==(v=Math.floor(D[2])+"")&&J(I,v),y&16&&se(c,"transform","translate(0, "+100*D[4]+"%)"),y&2&&P!==(P=D[1]>=15)&&(p.disabled=P)},i:oe,o:oe,d(D){D&&g(i),R=!1,me(Q)}}}let ne=300,re=100;function ve(e,i){return(e%i+i)%i}function ye(e,i,t){let h,f,{language:r,difficulty:n,rogueTopic:o}=i;const b=s=>{switch(s){case"rogue_mizuki":return"difficulty";default:return`${s.split("_")[1]}_difficulty`}};function l(s){s<0||s>15||n.update(()=>s)}let u;n.subscribe(s=>{t(1,u=s)});const k=_e();pe(e,k,s=>t(2,f=s));let m;function c(s){u>0&&t(3,m=setTimeout(function(){l(u-1),c(Math.max(s-100,re))},s))}function _(s){u<15&&t(3,m=setTimeout(function(){l(u+1),_(Math.max(s-100,re))},s))}const w=()=>c(ne),M=()=>clearTimeout(m),E=()=>clearTimeout(m),S=()=>l(u-1),v=()=>_(ne),I=()=>clearTimeout(m),V=()=>clearTimeout(m),p=()=>l(u+1);return e.$$set=s=>{"language"in s&&t(0,r=s.language),"difficulty"in s&&t(9,n=s.difficulty),"rogueTopic"in s&&t(10,o=s.rogueTopic)},e.$$.update=()=>{e.$$.dirty&1026&&he&&localStorage.setItem(b(o),u.toString()),e.$$.dirty&2&&k.set(u),e.$$.dirty&4&&t(4,h=ve(f,1))},[r,u,f,m,h,l,k,c,_,n,o,w,M,E,S,v,I,V,p]}class De extends ue{constructor(i){super(),ce(this,i,ye,ge,de,{language:0,difficulty:9,rogueTopic:10})}}export{De as D};
